<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
</head>
<body>

<h2>Admin Dashboard</h2>

<input id="secret" placeholder="Admin Key" />
<button onclick="loadUsers()">Load Users</button>

<div id="users"></div>

<script>
async function loadUsers() {
  const key = document.getElementById("secret").value;

  const res = await fetch("/admin/users?key=" + key);
  const data = await res.json();

  let html = "";
  data.forEach(u => {
    html += `
      <div>
        <b>${u.id}</b> â€” ${u.balance}
        <button onclick="approve('${u.id}')">Approve Withdraw</button>
      </div>
    `;
  });

  document.getElementById("users").innerHTML = html;
}

async function approve(id) {
  await fetch("/admin/approve", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ id })
  });
  alert("Approved");
}
</script>

</body>
</html>
